# 3章

## おさらい
* 有限オートマトン
* 非決定性
* 自由移動

## 3.3 正規表現

* 正規表現とは
    * 文字列をマッチングさせるときのパターンを書く言語
    * 本章では、文字列全体にマッチすものとする
        * not 部分マッチ

* 正規表現と文字列が与えられた時、その文字列が正規表現にマッチするかを判断するプログラム
    * 非決定性有限オートマトンの出番

### 3.3.1 構文
* 単純な2種類の正規表現
    * 空の正規表現
    * 1つのリテラル文字を含む正規表現
* 複雑な表現を作る3種の組み合わせ
    * 2つのパターンを連結する
    * 2つのパターンのどちらかを選択する
    * パターンを0回以上繰り返す
* 正規表現の抽象構文木の実装
    * SIMPLE式と同じ

* コード
    * to_s
    * precedence

### 3.3.2 意味論
* 構文はできた。NFAに変換したい。
    * NFA : 非決定性有限オートマトン

* Empty
    * 空文字列だけを常に受理する状態一つのNFA

* Literal(1文字)
    * 1文字を含む文字列だけを受理する

* Concatenate
    * 2つのNFAを並べて自由移動で繋ぐ
        * 1番目のNFAにある受理状態をすべて非受理状態に変えて、
        * 2番目のNFAの開始状態に自由移動で繋げる
        * 2番目のNFAの受理状態を全体の受理状態とする

    * 構成要素
        * 1番目のNFAの開始状態
        * 2番目のNFAの受理状態
        * 両方のNFAのすべての規則
        * 1番目のNFAの元の受理状態をそれぞれ2番目のNFAの元の開始状態につなげるための追加の自由移動

* Choose
    * 2つのNFAに新しい開始状態を追加し、そこから自由移動でそれぞれのNFAの元の開始状態へ繋げる
        * 入力を読む前に、自由移動で元のNFAの開始状態へ移動する
        * そこからいずれか読むことで次の受理状態に移動する

    * 構成要素
        * 新しい開始状態
        * 両方のNFAのすべての受理状態
        * 両方のNFAのすべての規則
        * 新しい開始状態をそれぞれのNFAの元の開始状態へ繋げる、追加の2つの自由移動


